{
  "name": "conn-in-contavirtual-pedido",
  "config": {
    "version" : "1",
    "description" : "Conector de entrada de dados referente a conta virtual",
    "connector.class": "io.confluent.connect.jdbc.JdbcSourceConnector",
    "connection.url": "jdbc:sqlserver://10.10.10.1:1433;databaseName=Blue",
    "connection.user": "confluent_machina_login",
    "connection.passingthroughportalword": "MachiNAAPapwrod",
    "topic.prefix": "topic-conn-conf-contavirtual",
    "poll.interval.ms": "60000",
    "mode": "timestamp",
    "timestamp.column.name": "dt_movimento",
    "timestamp.initial": "-1",
    "validate.non.null": "true",
    "query": "SELECT * FROM(SELECT (SELECT b.id_boleto FROM boletosemitidos b INNER JOIN cargacontrolefinanceiro CF ON b.Id_boleto = CF.Id_boleto INNER JOIN CargasMachina CB ON CB.Id_CargaControleFinanceiro = CF.Id_CargaControleFinanceiro WHERE b.id_conta = EA.id_conta AND CB.ID_ARQUIVOCARGASTD = sm.id_Pedido) AS id_boleto, CAST(ea.valor AS DECIMAL(15, 2)) AS valor, EA.datainclusao AS dt_movimento, ea.id_tipoajuste AS id_tipo_ajuste FROM eventosexternosajustes EA INNER JOIN solicitacaomovimentacao sm ON EA.id_eventoajuste = sm.id_ajuste WHERE EA.id_tipoajuste IN (1055, 1057, 1058)) AS ContaVirtualPedido",
    "key.converter.schema.registry.url": "https://mach-ecs12345.us-east-2.aws.confluent.cloud", 
    "value.converter.schema.registry.url": "https://mach-ecs12345.us-east-2.aws.confluent.cloud",
    "value.converter.schema.registry.basic.auth.user.info": "YOUR_AUTH",
    "key.converter.schema.registry.basic.auth.user.info": "YOUR_AUTH",
    "auto.register.schemas":"true",
    "transforms":"createKey,extractInt,setSchemaName",
    "transforms.createKey.type":"org.apache.kafka.connect.transforms.ValueToKey",
    "transforms.createKey.fields":"id_boleto",
    "transforms.extractInt.type":"org.apache.kafka.connect.transforms.ExtractField$Key",
    "transforms.extractInt.field":"id_boleto",
    "transforms.setSchemaName.type":"org.apache.kafka.connect.transforms.SetSchemaMetadata$Value",
    "transforms.setSchemaName.schema.name":"br.com.machina.schema.ConnConfirmacaoContaVirtualValue",
    "key.converter":"io.confluent.connect.avro.AvroConverter",
    "value.converter":"io.confluent.connect.avro.AvroConverter",
    "key.converter.basic.auth.credentials.source": "USER_INFO",
    "value.converter.basic.auth.credentials.source": "USER_INFO"
  }
}
