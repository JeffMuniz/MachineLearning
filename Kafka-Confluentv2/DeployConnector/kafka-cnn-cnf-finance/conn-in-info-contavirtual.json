{
  "name": "conn-in-info-contavirtual",
  "config": {
    "version": 1,
    "description": "Conector de entrada de dados referente a Info Contavirtual",
    "connector.class": "io.confluent.connect.jdbc.JdbcSourceConnector",
    "connection.url": "jdbc:sqlserver://{{ENV_DB_HOST}}:{{ENV_DB_PORT}};databaseName={{ENV_DB_BLUE_NAME}}",
    "connection.user": "{{ENV_DB_USER}}",
    "connection.passingthroughportalword": "{{ENV_DB_passingthroughportalword}}",
    "topic.prefix": "topic-info-contavirtual",
    "poll.interval.ms": "60000",
    "mode": "timestamp+incrementing",
    "incrementing.column.name": "id_evento",
    "incrementing.offset": "0",
    "validate.non.null": true,
    "query": "SELECT * FROM ( SELECT ea.id_eventoajuste AS id_evento, ea.id_tipoajuste as id_tipo_ajuste, ea.datainclusao AS DATA_HORA, CASE WHEN ta.flagcredito = 0 THEN 'd' ELSE 'c' END AS dc, p.cpf AS cnpj_carga, e.nomefantasia AS descricao_cliente_carga, sm.id_pedido AS id_pedido, b.id_boleto AS id_boleto, ta.descricao AS tipo_registro FROM solicitacaomovimentacao sm INNER JOIN eventosexternosajustes ea ON ea.id_eventoajuste = sm.id_ajuste INNER JOIN cargasCredito cb ON cb.id_arquivocargastd = sm.id_pedido INNER JOIN cargacontrolefinanceiro cf ON cf.id_cargacontrolefinanceiro = cb.id_cargacontrolefinanceiro INNER JOIN boletosemitidos b ON b.id_boleto = cf.id_boleto AND b.valordesconto > 0 INNER JOIN tiposajustes ta ON ta.id_ajuste = ea.id_tipoajuste INNER JOIN contas c ON c.id_conta = ea.id_conta INNER JOIN pessoas p ON p.id_pessoafisica = c.id_pessoa INNER JOIN empresas e ON e.id_pessoa = p.id_pessoafisica WHERE ea.id_tipoajuste IN ( 1054, 1055, 1057, 1058, 1068 ) ) AS InfoContavirtual ",
    "key.converter.schema.registry.url": "{{ENV_API_SCHEMA_REGISTRY_URL}}",
    "value.converter.schema.registry.url": "{{ENV_API_SCHEMA_REGISTRY_URL}}",
    "value.converter.schema.registry.basic.auth.user.info": "{{ENV_API_SCHEMA_REGISTRY_KEY}}:{{ENV_API_SCHEMA_REGISTRY_SECRET}}",
    "key.converter.schema.registry.basic.auth.user.info": "{{ENV_API_SCHEMA_REGISTRY_KEY}}:{{ENV_API_SCHEMA_REGISTRY_SECRET}}",
    "transforms": "createKey,extractInt",
    "transforms.createKey.type": "org.apache.kafka.connect.transforms.ValueToKey",
    "transforms.createKey.fields": "id_evento",
    "transforms.extractInt.type": "org.apache.kafka.connect.transforms.ExtractField$Key",
    "transforms.extractInt.field": "id_evento",
    "key.converter": "org.apache.kafka.connect.json.JsonConverter",
    "value.converter": "org.apache.kafka.connect.json.JsonConverter",
    "timestamp.column.name": "DATA_HORA",
    "value.converter.schema.registry.basic.auth.user.info": "{{ENV_API_SCHEMA_REGISTRY_KEY}}:{{ENV_API_SCHEMA_REGISTRY_SECRET}}",
    "key.converter.schema.registry.basic.auth.user.info": "{{ENV_API_SCHEMA_REGISTRY_KEY}}:{{ENV_API_SCHEMA_REGISTRY_SECRET}}",
    "timestamp.initial": -1,
    "internal.key.converter": "org.apache.kafka.connect.json.JsonConverter",
    "internal.key.converter.schemas.enable": true,
    "internal.value.converter": "org.apache.kafka.connect.json.JsonConverter",
    "internal.value.converter.schemas.enable": true,
    "quote.sql.identifiers": "NEVER",
    "timestamp.offset": "0"
  }
}