{
    "name": "conn-in-agendamento-credito",
    "config": {
         "version" : 1,
         "description" : "Conector de entrada de dados referente aos agendamentos de credito para o portador",
         "connector.class": "io.confluent.connect.jdbc.JdbcSourceConnector",
         "connection.url": "jdbc:sqlserver://{{ENV_DB_HOST}}:{{ENV_DB_PORT}};databaseName={{ENV_DB_BLUE_NAME}}",
         "connection.user": "{{ENV_DB_USER}}",
         "connection.passingthroughportalword": "{{ENV_DB_passingthroughportalword}}",
         "topic.prefix": "topic-conn-conf-agendamento-credito",
         "poll.interval.ms": 60000,
         "mode": "timestamp+incrementing",
         "timestamp.column.name": "dataSolicitacao",
         "timestamp.initial": -1,
         "incrementing.column.name": "idAgendamento",
         "incrementing.offset": "0",
         "validate.non.null": true,
         "query": "SELECT * FROM( SELECT FP.Id_Conta AS idContaDigital, ECDP.Id_EmpresaCargaDetalheProduto AS idAgendamento, CAST(ECDP.Valor AS NUMERIC(15,2)) AS valor, CB.DataProcessamento AS dataAgendamento, BE.DataEmissao AS dataSolicitacao FROM ARQUIVOCARGASTD ARQ (nolock) inner join CargasCredito CB (nolock) on ARQ.Id_ArquivoCargaSTD = CB.Id_ArquivoCargaSTD inner join CargaControleFinanceiro CCF (nolock) on CB.Id_CargaControleFinanceiro = CCF.Id_CargaControleFinanceiro inner join BoletosEmitidos BE (nolock) on CCF.ID_BOLETO = BE.ID_BOLETO inner join EmpresasCargas EC (nolock) on CB.Id_CargaMacEdueficio = EC.Id_CargaMacEdueficio inner join EmpresasCargasDetalhes ECD (nolock) on EC.Id_EmpresaCarga = ECD.Id_EmpresaCarga inner join EmpresasCargasDetalhesProdutos ECDP (nolock) on ECD.Id_EmpresaCargaDetalhe = ECDP.Id_EmpresaCargaDetalhe inner join FuncionariosProdutos FP (nolock) on ECDP.Id_FuncionariosProdutos = FP.Id_FuncionariosProdutos WHERE ECDP.Status not in (4,5) AND CB.Status not in (6)) AS AgendamentoCredito",
         "key.converter.schema.registry.url" : "https://{{ENV_API_SCHEMA_REGISTRY_URL}}",
         "value.converter.schema.registry.url" : "https://{{ENV_API_SCHEMA_REGISTRY_URL}}",
         "value.converter.schema.registry.basic.auth.user.info": "{{ENV_API_SCHEMA_REGISTRY_KEY}}:{{ENV_API_SCHEMA_REGISTRY_SECRET}}",
         "key.converter.schema.registry.basic.auth.user.info": "{{ENV_API_SCHEMA_REGISTRY_KEY}}:{{ENV_API_SCHEMA_REGISTRY_SECRET}}",
         "auto.register.schemas":"true",
         "transforms":"createKey,extractInt,setSchemaName",
         "transforms.createKey.type":"org.apache.kafka.connect.transforms.ValueToKey",
         "transforms.createKey.fields":"idAgendamento",
         "transforms.extractInt.type":"org.apache.kafka.connect.transforms.ExtractField$Key",
         "transforms.extractInt.field":"idAgendamento",
         "transforms.setSchemaName.type":"org.apache.kafka.connect.transforms.SetSchemaMetadata$Value",
         "transforms.setSchemaName.schema.name":"br.com.mac-edu.schema.ConnConfirmacaoAgendamentoCreditoValue",
         "key.converter":"io.confluent.connect.avro.AvroConverter",
         "value.converter":"io.confluent.connect.avro.AvroConverter",
         "key.converter.basic.auth.credentials.source": "USER_INFO",
         "value.converter.basic.auth.credentials.source": "USER_INFO"
   }
 }